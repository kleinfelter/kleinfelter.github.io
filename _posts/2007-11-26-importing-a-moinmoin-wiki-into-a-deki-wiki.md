---
excerpt: "I'm contemplating switching my wikis from MoinMoin to Deki.&nbsp; In order
  to be able to do this, I need to import MoinMoin pages and attachments into Deki.\r\n
  \ \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  <br />\r\n  <br />What my
  scripts will do:\r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  "
categories: []
layout: post
title: Importing a MoinMoin Wiki into a Deki Wiki
created: 1196085935
---
I'm contemplating switching my wikis from MoinMoin to Deki.&nbsp; In order to be able to do this, I need to import MoinMoin pages and attachments into Deki.
  
  
  
  
  
  
  
  
  
  <br />
  <br />What my scripts will do:
  
  
  
  
  
  
  
  
  <br />
  <ul>
    <li>Import MoinMoin <u>pages</u> into Deki.</li>
    <li>Import MoinMoin <u>attachments</u> into Deki.</li>
    <li>Import MoinMoin <u>users</u> into Deki.</li>
    <li>Create a mail-new-pw shell script you can run to notify all users of their user-ID and password on the new wiki.
      
      
      
      
      
      <br /></li>
  </ul>Known limitations:
  
  
  
  
  
  
  
  
  <br />
  <ul>
    <li>All page text is imported, but it may look a little different in Deki than in Moin.</li>
    <li>All attachments and embedded images will be moved to the end of their respective pages, and the embedded references to them will be changed to a message directing the user to the attachments at the end of the page.</li>
    <li>Embedded URLs will not be rewritten.&nbsp; This means that if your wiki is hosted at wiki.example.com, an url such as http://wiki.example.com/SomePage/Attached.file will NOT be adjusted to reference the relocated attachment.</li>
    <li>Users will be imported, but passwords will not.&nbsp; The Deki password 'recovery' process is available to users to gain access to their migrated account, as well as the email-password script generated by this upgrade process.
      
      
      
      
      
      <br /></li>
  </ul>Prerequisites:
  
  
  
  
  
  
  
  <br />
  <ul>
    <li>A Deki wiki (can be empty).</li>
    <li>A MoinMoin wiki.</li>
    <li>A Windows PC with</li>
    <ul>
      <li>Python 2.5
        
        
        
        
        
        
        
        <br /></li>
      <li>MoinMoin 1.5.8</li>
      <li>Cygwin
        
        
        
        
        
        
        
        <br /></li>
    </ul>
    <li>The instructions below assume that you have a MoinMoin wiki at www.example.com, that you've been evaluating Deki at wiki.example.com, and that you want your new wiki to be available at www.example.com.
      
      
      
      <br /></li>
    <li>Patience!</li>
  </ul>It does all the Deki I/O via curl, so you can use it for samples of the curl commands for:
  
  <br />
  <ul>
    <li>Authorization (login)</li>
    <li>Page creation</li>
    <li>Subpage creation</li>
    <li>User creation</li>
    <li>Attachments
      
      <br /></li>
  </ul><strong>Please note: </strong>I prefer to keep these instructions on my site, and that people download the scripts via this page.&nbsp; That way, there is a slight chance that I'll pick up some extra cents from the ads.
  <br /><strong>
    <br />Step-by-step instructions:
  
  
  
  
  
  
  </strong>
  <br />
  <ol>
    <li>Download my scripts to a Windows PC, and unzip them into a directory.
      
      
      
      
      
      
      
      <br /></li>
    <li>Download the MoinMoin data directory to a Windows PC.</li>
    <li>Shut down your MoinMoin wiki and bring up your new Deki wiki at the old URL.</li>
    <ol>
      <li>Edit your httpd.conf:</li>
      <ol>
        <li>Comment out your MoinMoin VirtualHost at www.example.com.</li>
        <li>Locate your entry for wiki.example.com, and change its server name to use www instead of wiki.
          
          
          
          <br /></li>
      </ol>
      <li>Restart Apache&nbsp;</li>
      <li>Make sure your (possibly empty) Deki wiki works at the new URL.
        
        
        <br /></li>
    </ol>
    <li>Edit myoptions.py to contain values relevant to your <u><strong>Deki</strong></u> wiki.</li>
    <ol>
      <li>Note: You may wish to create a special wiki user ID named something like &quot;imported-from-old-wiki&quot;.
        
        
        
        
        <br /></li>
    </ol>
    <li>From a CMD prompt, run: python builder.py C:\path\to\your\wiki\data-directory</li>
    <ol>
      <li>You now have a 'listfiles' subdirectory, containing content that is ready for importing into Deki, plus a 'load2deki.sh' shell script.</li>
    </ol>
    <li>From a Cygwin prompt, run: bash load2deki.sh</li>
    <ol>
      <li>Your <u>pages</u> have been loaded into your Deki wiki.&nbsp; Note that it is safe to re-run this script, if needed.&nbsp; It will overwrite any previous editions of the pages.
        
        
        
        
        
        <br /></li>
    </ol>
    <li>From a CMD prompt, run: python builder2.py C:\path\to\your\wiki\data-directory</li>
    <li>From a Cygwin prompt, run: bash load2deki2.sh</li>
    <ol>
      <li>Your <u>attachments</u> have been loaded into your Deki wiki.
        
        
        
        
        
        <br /></li>
    </ol>
    <li>From a CMD prompt, run: python builder3.py C:\path\to\your\wiki\data-directory</li>
    <li>
      From a Cygwin prompt, run: bash load2deki3.sh</li>
    <ol>
      <li>Your <u>users</u> have been loaded into your Deki Wiki.
        
        
        
        
        
        <br /></li>
    </ol>
    <li>Optional: Run mail-new-pw.sh on a server that supports the Unix/Linux 'mail' command.&nbsp; This will send email to each of your users, with their new ID/password.</li>
  </ol>
  <br />
